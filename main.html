<html>
<header>
<link rel=stylesheet type="text/css" href="main.css">
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAWSAImRXejAli-yp9vUlo3LhcsBNezx_Q"></script>
<script src="Location.js"></script>
</header>

<body>

<div id="pixnet">
<a href="https://www.pixnet.net/"><img src="Pixnet_logo.png"></img></a>
</div>

<div id="list">
	<form>
		<input type="text" name="search"> 
		<select>
			<option>Brands</option>
			<option>Product Name</option>
		</select> 
		<button type="button">SEARCH</button>
		<a href="member/index.php"><button type="button">Login</button></a>
		<a href="member/member_join_form.php"><button type="button">Register</button></a>
		<button type="button" onclick="getLocation()">Location</button>
	</form>
	
</div>

<div id="article">
	<h1>article</h1>
</div>

<div id="store">
	<h1>store</h1>
</div>


<div id="googlemap">
	<h1>google map</h1>
</div>

<div style="width:100%; height:100%">
	<img src="ball.png" onClick="dialog(this);switchMenu(this,'collection')" onmousedown="grab(this)"></img>
</div>
	
<div id="collection" style="display:none; width:300px; height:300px; background-image:url('menuback.png')">
    <h3 style="position:absolute; top:15px; left:25px;">收藏文章</h3>
</div>


<!--<script >
//var x=document.getElementById("demo");
function getLocation()
  {
  if (navigator.geolocation)
    {
    navigator.geolocation.getCurrentPosition(showPosition);
    }
  else{x.innerHTML="Geolocation is not supported by this browser.";}
  }
  //獲取目前位置
function showPosition(position)
  {
  var lat,lng;
  lat = position.coords.latitude;
  lng = position.coords.longitude;
  /*x.innerHTML="Latitude: " + lat + 
  "<br />Longitude: " + lng;*/
  initialize(lat,lng)  
  }
  function initialize(latitude,longitude) {
        var myLatlng = new google.maps.LatLng(latitude,longitude);
        var mapOptions = {
          center: { lat: latitude, lng: longitude},
          zoom: 15
        };
		//地圖設定
        var map = new google.maps.Map(
            document.getElementById('googlemap'),
            mapOptions);
		//畫出map
		var marker = new google.maps.Marker({
            position: myLatlng,
            title:"目前位置"
            });
		//標記地點
		marker.setMap(map);		
      }
</script>-->

<script type="text/javascript"><!--寶貝球js code-->
		var mousex = 0;
		var mousey = 0;
		var grabx = 0;
		var graby = 0;
		var orix = 0;
		var oriy = 0;
		var elex = 0;
		var eley = 0;
		var algor = 0;
		var openimg = 0;

		var dragobj = null;

		function falsefunc() { return false; } // used to block cascading events
	
		function init()
		{
			document.onmousemove = update; // update(event) implied on NS, update(null) implied on IE
			update();
		}

		function getMouseXY(e) // works on IE6,FF,Moz,Opera7
		{ 
			if (!e) e = window.event; // works on IE, but not NS (we rely on NS passing us the event)

			if (e)
			{ 
				if (e.pageX || e.pageY)
				{ // this doesn't work on IE6!! (works on FF,Moz,Opera7)
					mousex = e.pageX;
					mousey = e.pageY;
					algor = '[e.pageX]';
					if (e.clientX || e.clientY) algor += ' [e.clientX] '
				}
			else if (e.clientX || e.clientY)
			{ // works on IE6,FF,Moz,Opera7
				mousex = e.clientX + document.body.scrollLeft;
				mousey = e.clientY + document.body.scrollTop;
				algor = '[e.clientX]';
				if (e.pageX || e.pageY) algor += ' [e.pageX] '
			}  
			}
		}

		function update(e)
		{
			if(openimg!=1)
			getMouseXY(e); // NS is passing (event), while IE is passing (null)
		}

		function grab(context)
		{
			document.onmousedown = falsefunc; // in NS this prevents cascading of events, thus disabling text selection
			dragobj = context;
			dragobj.style.zIndex = 10; // move it to the top
			document.onmousemove = drag;
			document.onmouseup = drop;
			grabx = mousex;
			graby = mousey;
			elex = orix = dragobj.offsetLeft;
			eley = oriy = dragobj.offsetTop;
			update();
		}

		function drag(e) // parameter passing is important for NS family 
		{
			if (dragobj)
			{
				elex = orix + (mousex-grabx);
				eley = oriy + (mousey-graby);
				dragobj.style.position = "absolute";
				dragobj.style.left = (elex).toString(10) + 'px';
				dragobj.style.top  = (eley).toString(10) + 'px';
			}
		update(e);
		return false; // in IE this prevents cascading of events, thus text selection is disabled
		}

		function drop()
		{
			if (dragobj)
			{
			dragobj.style.zIndex = 0;
			dragobj = null;
			}
			update();
			document.onmousemove = update;
			document.onmouseup = null;
			document.onmousedown = null;   // re-enables text selection on NS
		}
		
		function dialog(MyImage)
		{	
			if((mousex-grabx)==0&&(mousey-graby)==0){
				if (openimg == 0){
					MyImage.src = "open.png";
					this.openimg = 1;
					document.getElementById('SubMenu2');
				}
				else if (this.openimg == 1){
					MyImage.src = "ball.png";
					openimg = 0;

				}
			}
		}
		
		var VisibleMenu = ''; // 記錄目前顯示的子選單的 ID
		// 顯示或隱藏子選單
		function switchMenu( theMainMenu, theSubMenu, theEvent ){
		if((mousex-grabx)==0&&(mousey-graby)==0){
			var SubMenu = document.getElementById( theSubMenu );
			if( SubMenu.style.display == 'none' ){ // 顯示子選單
				SubMenu.style.minWidth = theMainMenu.clientWidth; // 讓子選單的最小寬度與主選單相同 (僅為了美觀)
				SubMenu.style.display = 'block';
				hideMenu(); // 隱藏子選單
				VisibleMenu = theSubMenu;
			}
			else{ // 隱藏子選單
				if( theEvent != 'MouseOver' || VisibleMenu != theSubMenu ){
					SubMenu.style.display = 'none';
					VisibleMenu = '';
				}
			}
			SubMenu.style.position='absolute';
			SubMenu.style.top=eley+30 + 'px';
			SubMenu.style.left=elex-300 + 'px';
		}
		}

		// 隱藏子選單
		function hideMenu(){
		if( VisibleMenu != '' ){
			document.getElementById( VisibleMenu ).style.display = 'none';
		}
		VisibleMenu = '';
		}
	</script>
</body>
</html>